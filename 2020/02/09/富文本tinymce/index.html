<!DOCTYPE html>
<html>
  
<head>
  <meta charset="utf-8">
  <meta name="author" content="Ranan" />
  
  
  <title>富文本tinymce | Ranan的博客</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="前端,库,富文本," />
  

  
  <meta name="description" content="Ranan的博客">

  

  

  

  

  

  <script>
  // theme-ad's config script
  // it can be used in every script
  
  window.AD_CONFIG = {
    leancloud: {"appid":"Hyq9wkH495DgNHWhDQCOfQSp-gzGzoHsz","appkey":"WaR7nrzhliHj9aVwdQzkdlGd","comment":false,"count":false},
    welcome: {"enable":false,"interval":30},
    start_time: "2018-02-10",
    passwords: ["efe07af7441da2b69c4a41e42e73be4db47f66010a56900788a458354a7373ec", ],
    is_post: true,
    lock: false,
    author: "Ranan",
    share: {"twitter":false,"facebook":false,"weibo":false,"qq":false,"wechat":false},
    mathjax: false,
    page_type: "",
    root: "/"
  };
</script>

  <script src="/vendor/sha256.min.js"></script>
<script src="/js/auth.js"></script>
<script src="/js/index.js"></script>
<script src="/vendor/qrcode.min.js"></script>

  
    <link rel="icon" href="/images/favicon.ico">
    <link rel="apple-touch-icon" href="/images/touch-icon.png">
  

  <link href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="stylesheet" href="/css/index.css">
<link rel="stylesheet" href="/styles/components/highlight/highlight.css">

  
</head>
  <body>
    <header class="site-header">
  <div class="site-header-brand">
    
      <span class="site-header-brand-title">
        <a href="/">Ranan</a>
      </span>
    
    
      <span class="site-header-brand-motto"> | 不能放弃思考</span>
    
  </div>
  <div class="site-header-right">
    <nav class="site-header-navigation">
      
        <a href="/" target="_self">首页</a>
      
        <a href="/archives/" target="_self">归档</a>
      
        <a href="/tags/" target="_self">标签</a>
      
        <a href="/categories/" target="_self">分类</a>
      
        <a href="/about/" target="_self">关于</a>
      
    </nav>
    <div class="site-header-btn">
      
        <a href="https://biubiuins.github.io/" target="_blank" id="site-github">
          <i class="fa fa-github-alt"></i>
        </a>
      
      <a href="javascript:void(0);" id="site-search">
        <i class="fa fa-search"></i>
      </a>
      <a href="javascript:void(0);" id="site-nav-btn">
        <i class="fa fa-ellipsis-v"></i>
      </a>
    </div>
  </div>
</header>
<nav class="table-content" id="site-nav">
  <div class="table-content-title">
    <span>导航</span>
  </div>
  <div class="table-content-main">
    <ol class="toc">
      
        <li class="toc-item">
          <a href="/" target="_self">
            首页
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/archives/" target="_self">
            归档
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/tags/" target="_self">
            标签
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/categories/" target="_self">
            分类
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/about/" target="_self">
            关于
          </a>
        </li>
      
    </ol>
  </div>
</nav>
<div id="site-process"></div>
    <main>
      
  <div class="passage">
  <div class="passage-meta">
    <span>
      <i class="fa fa-calendar"></i>2020-02-09
    </span>
    
      <span>
        | <a href="/categories/前端/"><i class="fa fa-bookmark"></i>前端</a>
      </span>
    
    
      <span>
        | <i class="fa fa-unlock-alt"></i>UNLOCK
      </span>
    
  </div>
  <h1 class="passage-title">
    富文本tinymce
  </h1>
  
  <article class="passage-article">
    <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><pre><code>//安装tinymce-vue
npm install @tinymce/tinymce-vue -S
//安装tinymce,版本为5.X
npm install tinymce -S
//引入中文语言包
</code></pre><p><a href="https://www.tiny.cloud/get-tiny/language-packages/" target="_blank" rel="noopener">中文下载包</a></p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>在 node_modules中找到 tinymce/skins目录，然后将skins目录拷贝到static目录下的tinymce</p>
<p> <img src="/img/富文本/富文本1.png" width="30%"></p>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>引入基本文件</p>
<pre><code>  //初始化tinymce
  import tinymce from &#39;tinymce/tinymce&#39;
  import Editor from &#39;@tinymce/tinymce-vue&#39;
  import &#39;tinymce/themes/silver&#39;
</code></pre><p>注册组件</p>
<pre><code class="bash">&lt;Editor&gt;&lt;/Editor&gt;

//js
components: {Editor}
</code></pre>
<p>初始化配置</p>
<pre><code class="bash">&lt;Editor :init=&quot;init&quot;&gt;&lt;/Editor&gt;
 data() {
 return {
  init:{
//语言
language_url: &#39;/static/tinymce/zh_CN.js&#39;,
language: &#39;zh_CN&#39;,
 //skin路径
skin_url: &#39;/static/tinymce/skins/ui/oxide&#39;,
}
}
},
 mounted () {
 tinymce.init({})
 },
</code></pre>
<p>初始化配置之后最基本的符文就有了，接下来丰富它的功能</p>
<p><img src="/img/富文本/富文本2.png"></p>
<p>数据同步</p>
<pre><code class="bash">//子组件
  &lt;Editor  v-model=&quot;myValue&quot;&gt;&lt;/Editor&gt;
   data() {
              return {
                myValue: this.value
                }
   },
     props: {
      value: {
               default: &#39;&#39;,
               type: String
             },
     }
      watch: {
           value(newValue) {
             this.myValue = newValue
           },
           myValue(newValue) {
             this.$emit(&#39;input&#39;, newValue)
           }
         },
//父组件  onEditorUploadSuccess为图片上传成功的回调
    &lt;editor v-model=&quot;value&quot; @on-upload-success=&quot;onEditorUploadSuccess&quot;
        &gt;&lt;/editor&gt;

</code></pre>
<p>完整代码</p>
<pre><code class="bash">&lt;template&gt;
  &lt;div&gt;

      &lt;Editor :init=&quot;init&quot; v-model=&quot;myValue&quot;&gt;&lt;/Editor&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
  //这个是接口文件
  import {ImgUpload} from &#39;@/api/notice&#39;

  //初始化tinymce
  import tinymce from &#39;tinymce/tinymce&#39;
  import Editor from &#39;@tinymce/tinymce-vue&#39;
  //引入主题
  import &#39;tinymce/themes/silver&#39;

  /*
  引入插件
   */
  import &#39;tinymce/plugins/image&#39;
  import &#39;tinymce/plugins/table&#39;
  import &#39;tinymce/plugins/preview&#39;
  import &#39;tinymce/plugins/fullscreen&#39;
  import &#39;tinymce/plugins/link&#39;
  import &#39;tinymce/plugins/code&#39;
  import &#39;tinymce/plugins/lists&#39;
  import &#39;tinymce/plugins/hr&#39;
  import &#39;tinymce/plugins/advlist&#39;
  import &#39;tinymce/plugins/paste&#39;
  import &#39;tinymce/plugins/importcss&#39;
  import &#39;tinymce/plugins/media&#39;



  export default {
        data() {
            return {
              myValue: this.value,
              init:{
                //语言
                language_url: &#39;/static/tinymce/zh_CN.js&#39;,
                language: &#39;zh_CN&#39;,
                //设置皮肤
                skin_url: &#39;/static/tinymce/skins/ui/oxide&#39;,
                //高度
                height: 400,
                //菜单栏
                menubar: false,
                //隐藏商标
                // branding: false,
                //工具栏|分类 配置插件
                toolbar: `styleselect | fontselect | formatselect | fontsizeselect | forecolor backcolor | bold italic underline strikethrough | image   | table | alignleft aligncenter alignright alignjustify | outdent indent | numlist bullist | preview removeformat  hr |  code  link | undo redo | fullscreen `,

                //自动聚焦
                auto_focus: true,
                //引入插件
                plugins: ` paste importcss image code table advlist fullscreen link media lists   hr preview`,
                //图片标题
                image_caption: true,
                //上传本地图片
                image_uploadtab:true,
                // Image
                imagetools_toolbar: &#39;rotateleft rotateright | flipv fliph | editimage imageoptions&#39;,


              // 设置Tab
             // tabfocus_elements: &#39;:prev,:next&#39;,
             //  object_resizing: true,
             //设置可选段落样式
             style_formats: [
                  {
                    title: &#39;首行缩进&#39;,
                    block: &#39;p&#39;,
                    styles: { &#39;text-indent&#39;: &#39;2em&#39; }
                  },
                  {
                    title: &#39;行高&#39;,
                    items: [
                      { title: &#39;1&#39;, styles: { &#39;line-height&#39;: &#39;1&#39; }, inline: &#39;span&#39; },
                      { title: &#39;1.5&#39;, styles: { &#39;line-height&#39;: &#39;1.5&#39; }, inline: &#39;span&#39; },
                      { title: &#39;2&#39;, styles: { &#39;line-height&#39;: &#39;2&#39; }, inline: &#39;span&#39; },
                      { title: &#39;2.5&#39;, styles: { &#39;line-height&#39;: &#39;2.5&#39; }, inline: &#39;span&#39; },
                      { title: &#39;3&#39;, styles: { &#39;line-height&#39;: &#39;3&#39; }, inline: &#39;span&#39; }
                    ]
                  }
                ],
             //字体列表
              font_formats: `
            微软雅黑=微软雅黑;
            宋体=宋体;
            黑体=黑体;
            仿宋=仿宋;
            楷体=楷体;
            隶书=隶书;
            幼圆=幼圆;
            Andale Mono=andale mono,times;
            Arial=arial, helvetica,
            sans-serif;
            Arial Black=arial black, avant garde;
            Book Antiqua=book antiqua,palatino;
            Comic Sans MS=comic sans ms,sans-serif;
            Courier New=courier new,courier;
            Georgia=georgia,palatino;
            Helvetica=helvetica;
            Impact=impact,chicago;
            Symbol=symbol;
            Tahoma=tahoma,arial,helvetica,sans-serif;
            Terminal=terminal,monaco;
            Times New Roman=times new roman,times;
            Trebuchet MS=trebuchet ms,geneva;
            Verdana=verdana,geneva;
            Webdings=webdings;
            Wingdings=wingdings,zapf dingbats`,
              //内容样式, 在最后呈现的页面也要写入这个基本样式保证前后一致
                content_style: `
            *                         { padding:0; margin:0; }
            html, body                { height:100%; }
            img                       { max-width:100%; display:block;height:auto; }
            a                         { text-decoration: none; }
            iframe                    { width: 100%; }
            p                         { line-height:1.6; margin: 0px; font-family:&quot;宋体&quot;; }
            table                     { word-wrap:break-word; word-break:break-all; max-width:100%; border:none; border-color:#999; }
            .mce-object-iframe        { width:100%; box-sizing:border-box; margin:0; padding:0; }
            ul,ol                     { list-style-position:inside; }
          `,

                insert_button_items: &#39;image link | inserttable&#39;,
                //回车添加的标签
                forced_root_block:&quot;p&quot;,
                //强制每行添加&lt;p&gt;标签
                force_p_newlines: true,
                importcss_append: true,
                //字体大小栏选项
                fontsize_formats: &#39;10px 11px 12px 14px 16px 18px 20px 24px&#39;,
                // paste设置
                paste_data_images: true,//可以粘贴图片
                paste_word_valid_elements: &#39;*[*]&#39;,//word过滤
                paste_retain_style_properties:&#39;all&#39;, //允许保留word粘贴过来的格式
                paste_convert_word_fake_lists: false,//禁止word的列表内容转换html的ul和ol格式
                paste_merge_formats: true,//合并相似格式
                nonbreaking_force_tab: false,
                paste_auto_cleanup_on_paste: false,


                statusbar: false, // 隐藏编辑器底部的状态栏
                images_upload_handler: this.uploadImg//图片上传


              },

            }
        },
      props: {
          //图片最大大小
        maxSize: {
          default: 2097152,
          type: Number
        },
        //图片可接收类型
        accept: {
          default: &#39;image/jpeg, image/png, image/jpg, image/svg, image/gif&#39;,
          type: String
        },
        //上传地址
        url: {
          default: &#39;&#39;,
          type: String
        },
        //数据
        value: {
          default: &#39;&#39;,
          type: String
        },
      },
        methods: {
        //上传图片
          uploadImg(blobInfo, success, failure)  {
            const that = this
            //符合大小
            if (blobInfo.blob().size &gt; this.maxSize) {
      failure(&#39;文件体积过大&#39;);
    }
            //符合类型
            if (this.accept.indexOf(blobInfo.blob().type) &gt; -1) {
              let form = new FormData();
    form.append(&#39;file&#39;, blobInfo.blob(), blobInfo.filename());

              ImgUpload(form).then(res=&gt;{
                //给父组件传值
                that.$emit(&#39;on-upload-success&#39;, {
                  res, success, failure
                })
              }).catch(err =&gt; {
                failure(&#39;上传失败: &#39; + err);
              })
            }
            else failure(&#39;图片格式错误&#39;);

  },
        },
     watch: {

      value(newValue) {
        this.myValue = newValue
      },
      myValue(newValue) {
        this.$emit(&#39;input&#39;, newValue)
      }
    },
        components: {Editor},
      mounted () {
        tinymce.init({})
      },
    }
&lt;/script&gt;
&lt;!--scoped 样式仅仅在当前组件使用--&gt;
&lt;style scoped&gt;

&lt;/style&gt;

</code></pre>

  </article>
  <aside class="table-content" id="site-toc">
  <div class="table-content-title">
    <i class="fa fa-arrow-right fa-lg" id="site-toc-hide-btn"></i>
    <span>目录</span>
  </div>
  <div class="table-content-main">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装"><span class="toc-text">安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用"><span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#初始化"><span class="toc-text">初始化</span></a></li></ol></li></ol>
  </div>
</aside>
  
  
    <div class="passage-tags">
     
      <a href="/tags/富文本/"><i class="fa fa-tags"></i>富文本</a>
    
    </div>
  
</div>

    </main>
    
    <div class="site-footer-wrapper">
  <footer class="site-footer">
    
    <!--<div class="site-footer-info">-->
      <!--<i class="fa fa-clock-o"></i> 本站已稳定运行<span id="site-time"></span>-->
    <!--</div>-->
    
    
      <div class="site-footer-info">
        <i class="fa fa-at"></i> Email: 981684424@qq.com
      </div>
    
    <div class="site-footer-info">
      <i class="fa fa-copyright"></i> 
      2019 <a href="https://github.com/dongyuanxin/theme-ad/" target="_blank">Theme-AD</a>.
      Created by <a href="https://godbmw.com/" target="_blank">GodBMW</a>.
      All rights reserved.
    </div>
  </footer>
</div>
    <div id="site-layer" style="display:none;">
  <div class="site-layer-content">
    <div class="site-layer-header">
      <span class="site-layer-header-title" id="site-layer-title"></span>
      <i class="fa fa-close" id="site-layer-close"></i>
    </div>
    <div class="site-layer-body" id="site-layer-container">
      <div class="site-layer-input" id="site-layer-search" style="display: none;">
        <div class="site-layer-input-choose">
          <a href="javascript:void(0);" title="Change Search Engine">Google</a>
        </div>
        <input type="text">
        <i class="fa fa-search"></i>
      </div>
      
      <div id="site-layer-welcome" style="display:none;"></div>
    </div>
  </div>
</div>
    

<div class="bottom-bar">
  <div class="bottom-bar-left">
    <a href="/2020/02/14/git-1/" data-enable="true">
      <i class="fa fa-arrow-left"></i>
    </a>
    <a href="/2020/02/06/软件超市项目后台管理界面开发流程3/" data-enable="true">
      <i class="fa fa-arrow-right"></i>
    </a>
  </div>
  <div class="bottom-bar-right">
    <a href="javascript:void(0);" data-enable="true" id="site-toc-show-btn">
      <i class="fa fa-bars"></i>
    </a>
    
    <a href="javascript:void(0);" id="site-toggle-share-btn">
      <i class="fa fa-share-alt"></i>
    </a>
    
    <a href="javascript:void(0);" id="back-top-btn">
      <i class="fa fa-chevron-up"></i>
    </a>
  </div>
</div>
    <div id="share-btn">
  
  
  
  
  
</div>
    





    
  </body>
</html>